# 1. 백테스팅 프로그램

## 1.1 변동성 돌파 전략 백테스트
  상승하는 종목은 수익이 나지만 하락하는 종목을 거래가 되지 않거나 손실이 남
## 1.2 손절 로직 추가 백테스트
  하루 중 변동성을 견디지 않고 손절가에 도달하면 팔아버리기 때문에 충분한 수익을 올리지 못함   
  특히 전달 변동폭이 적으면 당일 주가가 올라도 조금만 떨어지면 팔아 버림  
  예를 들면 유한양행 작년 11/6일 주가가 많이 올랐는데 기존 알고리즘은 장종료까지 가는데,   
  수정하여 손절 로직을 넣으면 중간에 손절가에 도달하여 매도해서 손실이 남
## 1.3 MA 돌파 전략 백테스트
  변동성 돌파 전략보다는 효과적인 것으로 나타남

--------------------------------  
# 2. MA돌파전략 프로그램
  통계를 이용한 매수 가격 결정 방법으로  
  기존 변동성 돌파 전략이 전날 변동폭에만 의존하는 한계성을 통계적으로 해결한 방법  
  다음 3가지 조건을 만족하는 경우 매수  
  (1) 20일 평균 + 표준편차 * 0.7 (2) 5일 평균 (3) 10일 평균  

## 2.1 기존 방식과 비교
|구분|기존(변동성돌파)|변경(MA돌파)|
|------|---|---|
|방식|전날 변동폭에 의존|통계 의존(20일 평균/분산)|
|특장점|전날 급등하면 고가에 매수 우려|급등락 리스크 헤지 가능|
|동일|종가에 매도(15:15)|종가에 매도(15:15)|

## 2.2 계산방식
  파이썬 이동평균, 표준편차 계산식 활용(rolling, mean, std)  
  매수가격 = 20일 평균 + 표준편차 * 0.7  
  (참고) Bollinger Band의 경우 * 2를 사용

## 2.3 버그수정
  20일 평균 계산 시 전날까지 이동평균을 계산(shift를 활용)  
  
